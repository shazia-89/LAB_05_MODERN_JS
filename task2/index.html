<!DOCTYPE html>
<html>
<body>

<button id="loadFeature">Load Advanced Feature</button>

<div style="height: 1000px"></div>

<div id="lazy">Waiting...</div>

<script type="module">
  document.getElementById("loadFeature").addEventListener("click", async () => {
    try {
      const module = await import("./modules/advanced_feature.mjs");
      module.showAdvanced();
    } catch {
      alert("Failed to load module");
    }
  });

  const observer = new IntersectionObserver(async (entries) => {
    if (entries[0].isIntersecting) {
      const module = await import("./modules/lazy_component.mjs");
      module.loadLazy();
    }
  });

  observer.observe(document.getElementById("lazy"));
</script>

</body>
</html>
